class Y{iter;constructor(K){this.iter=K[Symbol.iterator]()}[Symbol.iterator](){return this.iter}next(){return this.iter.next()}static from(K){return new Y(K)}static range(K,Z,J=1){function*$(){if(Z===void 0)Z=K,K=0;for(let Q=K;J>0?Q<Z:Q>Z;Q+=J)yield Q}return new Y($())}static zip(...K){let Z=K.map((Q)=>Q[Symbol.iterator]()),J=K.length;function*$(){while(!0){let Q=[];for(let j=0;j<J;j++){let q=Z[j].next();if(q.done)return;Q.push(q.value)}yield Q}}return new Y($())}zip(K){return this.applyGenFn(function*Z(J){let $=J[Symbol.iterator](),Q=K[Symbol.iterator]();while(!0){let j=$.next(),q=Q.next();if(j.done||q.done)return;yield[j.value,q.value]}})}enumerate(){return this.applyGenFn(function*K(Z){let J=0;for(let $ of Z)yield[J,$],J+=1})}map(K){return this.applyGenFn(function*Z(J){for(let $ of J)yield K($)})}filter(K){return this.applyGenFn(function*Z(J){for(let $ of J)if(K($))yield $})}filterMap(K){return this.applyGenFn(function*Z(J){for(let $ of J){let Q=K($);if(Q)yield Q}})}flatMap(K){return this.applyGenFn(function*Z(J){for(let $ of J){let Q=K($);if(Q)for(let j of Q)yield j}})}forEach(K){for(let Z of this)K(Z)}fold(K,Z){let J=K;for(let $ of this)J=Z(J,$);return J}collectArray(K=void 0){K=K===void 0?new Array:K;for(let Z of this)K.push(Z);return K}collectSet(K=void 0){K=K===void 0?new Set:K;for(let Z of this)K.add(Z);return K}collectMap(K=void 0){K=K===void 0?new Map:K;for(let[Z,J]of this)K.set(Z,J);return K}collectObject(){return Object.fromEntries(this)}applyGenFn(K){return new Y(K(this))}}class c{#K;#Z;#J;#Q;#j;constructor(K=!1,Z=null,J=null){this.#K=[],this.#Z=K,this.#J=J??z.identity(),this.#Q=null,this.#j=new Intl.NumberFormat("en-US",{useGrouping:!1,maximumFractionDigits:Z??2})}#$(K,Z){K=this.#J.apply(K);let J=this.#Z&&this.#Q?K.sub(this.#Q):K;if(Z&&J.x>=0)this.#K.push(" ");if(this.#K.push(this.#j.format(J.x)),J.y>=0)this.#K.push(",");return this.#K.push(this.#j.format(J.y)),K}moveTo(K){this.#K.push(this.#Z&&this.#Q?"m":"M"),this.#Q=this.#$(K,!1)}lineTo(K){this.#K.push(this.#Z?"l":"L"),this.#Q=this.#$(K,!1)}quadTo(K,Z){this.#K.push(this.#Z?"q":"Q"),this.#$(K,!1),this.#Q=this.#$(Z,!0)}cubicTo(K,Z,J){this.#K.push(this.#Z?"c":"C"),this.#$(K,!1),this.#$(Z,!0),this.#Q=this.#$(J,!0)}close(){this.#K.push("Z")}build(){return this.#K.join("")}}class I{min;max;constructor(K=null,Z=null){this.min=K;this.max=Z}extend(K){if(this.min===null||this.max===null){this.min=new L(K.x,K.y),this.max=new L(K.x,K.y);return}if(K.x<this.min.x)this.min.x=K.x;if(K.x>this.max.x)this.max.x=K.x;if(K.y<this.min.y)this.min.y=K.y;if(K.y>this.max.y)this.max.y=K.y}moveTo(K){this.extend(K)}lineTo(K){this.extend(K)}quadTo(K,Z){this.extend(K),this.extend(Z)}cubicTo(K,Z,J){this.extend(K),this.extend(Z),this.extend(J)}close(){}}class L{x;y;constructor(K,Z){this.x=K;this.y=Z}add(K){return new L(this.x+K.x,this.y+K.y)}sub(K){return new L(this.x-K.x,this.y-K.y)}mul(K){return new L(this.x*K,this.y*K)}lerp(K,Z){let J=1-Z;return new L(this.x*J+K.x*Z,this.y*J+K.y*Z)}toString(){return`Point(${this.x}, ${this.y})`}}class z{m00;m01;m02;m10;m11;m12;constructor(K,Z,J,$,Q,j){this.m00=K;this.m01=Z;this.m02=J;this.m10=$;this.m11=Q;this.m12=j}static identity(){return new z(1,0,0,0,1,0)}translate(K,Z){return this.matmul(new z(1,0,K,0,1,Z))}scale(K,Z){return this.matmul(new z(K,0,0,0,Z,0))}rotate(K){let Z=Math.cos(K),J=Math.sin(K);return this.matmul(new z(Z,-J,0,J,Z,0))}matmul(K){return new z(this.m00*K.m00+this.m01*K.m10,this.m00*K.m01+this.m01*K.m11,this.m00*K.m02+this.m01*K.m12+this.m02,this.m10*K.m00+this.m11*K.m10,this.m10*K.m01+this.m11*K.m11,this.m10*K.m02+this.m11*K.m12+this.m12)}apply(K){return new L(K.x*this.m00+K.y*this.m01+this.m02,K.x*this.m10+K.y*this.m11+this.m12)}}var d=1,h=2,g=4,n=8,b=16,m=32,o=1,t=2,a=8,f=32,r=64,e=128;class l{font;glyphId;contoursCount;minPoint;maxPoint;#K;constructor(K,Z,J){if(this.font=K,this.glyphId=Z,J&&J.length()!==0)this.contoursCount=J.readI16(),this.minPoint=new L(J.readI16(),J.readI16()),this.maxPoint=new L(J.readI16(),J.readI16()),this.#K=J.view(10);else this.contoursCount=0,this.minPoint=new L(0,0),this.maxPoint=new L(0,0),this.#K=null}toString(){let{x:K,y:Z}=this.maxPoint.sub(this.minPoint),J=this.#K?this.#K.length():0;return`Glyph(size=${[K,Z]}, min=${this.minPoint}, contours=${this.contoursCount}, data=${J})`}toSVGPath(K=null,Z=!1,J=null){let $=this.bbox();if($===null)return["",null];let[Q,j]=$,q=Q.add(j).mul(0.5),W=Math.max(this.font.getHeadTable().unitsPerEm,(j.x-Q.x)*1.1,(j.y-j.y)*1.1),U=new L(W/2,W/2).sub(q);return K=K??z.identity(),K=K.matmul(new z(1,0,0,0,-1,100).scale(100/W,100/W).translate(U.x,U.y)),[this.buildOutline(new c(Z,J,K)).build(),$]}bbox(){if(this.contoursCount<0){let K=this.buildOutline(new I);if(K.min===null||K.max===null)return null;return[K.min,K.max]}else if(this.contoursCount===0)return null;else{let K=Y.from(this.#J()).fold(new I,(Z,J)=>{return Z.extend(J.coord),Z});if(K.min===null||K.max===null)return null;return[K.min,K.max]}}buildOutline(K,Z=null){if(this.contoursCount>=0)this.#Z(K,Z);else this.#Q(K,Z);return K}#Z(K,Z){Z=Z??z.identity();let J=null,$=null,Q=null;for(let j of this.#J()){if(J===null)if(j.isOnCurve)J=j.coord,K.moveTo(Z.apply(j.coord));else if($){let q=$.lerp(j.coord,0.5);J=q,Q=j.coord,K.moveTo(Z.apply(q))}else $=j.coord;else if(Q)if(j.isOnCurve)K.quadTo(Z.apply(Q),Z.apply(j.coord)),Q=null;else{let q=Q.lerp(j.coord,0.5);K.quadTo(Z.apply(Q),Z.apply(q)),Q=j.coord}else if(j.isOnCurve)K.lineTo(Z.apply(j.coord));else Q=j.coord;if(j.isLast){if($&&Q){let q=Q.lerp($,0.5);K.quadTo(Z.apply(Q),Z.apply(q)),Q=null}if(J)if($)K.quadTo(Z.apply($),Z.apply(J));else if(Q)K.quadTo(Z.apply(Q),Z.apply(J));else K.lineTo(Z.apply(J));K.close(),J=null,$=null,Q=null}}}#J=function*(){if(this.contoursCount==0)return;let K=this.#K;K.seek(0);let Z=0,J=Y.range(this.contoursCount).map((B)=>{let F=K.readU16();return Z=F,F}).collectSet();if(Z=Z+1,Z==1)return;let $=K.readU16();K.advance($);let Q=0,j=0,q=Z,W=[];while(q>0){let B=K.readU8(),F=1;if(W.push(B),B&n){F+=K.readU8();for(let H of Y.range(F-1))W.push(B)}if(F>q)break;if(q-=F,B&h)Q+=F;else if(!(B&b))Q+=F*2;if(B&g)j+=F;else if(!(B&m))j+=F*2}let U=K.tell(),V=U+Q,X=V+j,G=K.view(U,V),k=K.view(V,X),M=0,A=0;for(let[B,F]of Y.from(W).enumerate()){let H=0,w=!(F&b);if(F&h){if(H=G.readU8(),w)H=-H}else if(w)H=G.readI16();M+=H;let E=0,N=!(F&m);if(F&g){if(E=k.readU8(),N)E=-E}else if(N)E=k.readI16();A+=E,yield{coord:new L(M,A),isOnCurve:Boolean(F&d),isLast:J.has(B)}}};#Q(K,Z){Z=Z??z.identity();let J=this.#K;J.seek(0);let $=this.font.getGlyfTable();while(!0){let Q=J.readU16(),j=J.readU16(),q=$.glyphs.at(j);if(q===void 0){if(console.error(`[${this.font.getNameTable().family}][${this.glyphId}] requested invalid glyph ${j}`),!(Q&f))break;continue}let[W,U,V,X,G,k]=[1,0,0,0,1,0];if(Q&t)if(Q&o)V=J.readI16(),k=J.readI16();else V=J.readI8(),k=J.readI8();if(Q&e)W=J.read2FDot14(),X=J.read2FDot14(),U=J.read2FDot14(),G=J.read2FDot14();else if(Q&r)W=J.read2FDot14(),G=J.read2FDot14();else if(Q&a)W=J.read2FDot14(),G=W;let M=new z(W,U,V,X,G,k);if(q.buildOutline(K,Z.matmul(M)),!(Q&f))break}}}class _{#K;#Z;constructor(K){this.#K=K,this.#Z=0}data(){let K=this.#K.byteOffset;return this.#K.buffer.slice(K,K+this.#K.byteLength)}length(){return this.#K.byteLength}tell(){return this.#Z}seek(K,Z=!0){if(!Z)this.#Z+=K;else if(K>=0)this.#Z=K;else if(K<0)this.#Z=this.#K.byteLength+K;return this.advance(0)}advance(K){let Z=this.#Z+K;return this.#Z=Math.max(0,Math.min(Z,this.#K.byteLength)),this.#Z}view(K=0,Z=null){if(K===null)K=this.#Z;else K=Math.max(0,Math.min(K,this.#K.byteLength));if(Z===null)Z=this.#K.byteLength;else Z=Math.max(K,Math.min(Z,this.#K.byteLength));let J=new DataView(this.#K.buffer,this.#K.byteOffset+K,Z-K);return new _(J)}read(K){let Z=new Uint8Array(this.#K.buffer,this.#K.byteOffset+this.#Z,K);return this.advance(K),Z}readString(K){return new TextDecoder().decode(this.read(K))}readU8(){let K=this.#K.getUint8(this.#Z);return this.advance(1),K}readI8(){let K=this.#K.getInt8(this.#Z);return this.advance(1),K}readU16(){let K=this.#K.getUint16(this.#Z);return this.advance(2),K}readI16(){let K=this.#K.getInt16(this.#Z);return this.advance(2),K}readU32(){let K=this.#K.getUint32(this.#Z);return this.advance(4),K}readI32(){let K=this.#K.getInt32(this.#Z);return this.advance(4),K}readU64(){let K=this.#K.getBigUint64(this.#Z);return this.advance(8),K}readI64(){let K=this.#K.getBigInt64(this.#Z);return this.advance(8),K}readFixed(){return this.readI32()/65536}read2FDot14(){return this.readI16()/16384}readLongDate(){let K=this.readI64()-2082844800n;return new Date(Number(K)*1000)}toString(){return`Reader(postion=${this.#Z}, size=${this.#K.byteLength})`}}class p{checksum;offset;length;constructor(K,Z,J){this.checksum=K;this.offset=Z;this.length=J}reader(K){return new _(new DataView(K.data,this.offset,this.length))}}var KK=32,ZK=6,JK=35;class R{#K;#Z;name;fontType;tables;glyphCount;constructor(K){this.#K=K,this.tables=new Map,this.#Z=new Map;let Z=new _(new DataView(this.#K)),J=Z.readU32();if(J===65536)this.fontType="ttf";else if(J===1330926671)this.fontType="otf";else throw new Error(`Unkown font type: ${J}`);let $=Z.readU16();Z.readU16(),Z.readU16(),Z.readU16();for(let j=0;j<$;j++){let q=Z.readString(4);this.tables.set(q,new p(Z.readU32(),Z.readU32(),Z.readU32()))}let Q=this.tables.get("maxp").reader(this);Q.advance(4),this.glyphCount=Q.readU16(),this.name=this.getNameTable()}get data(){return this.#K}toString(){let K=this.getNameTable();return`Font(family=${K.family}, subfamily=${K.subfamily}, glyph_count=${this.glyphCount})`}glyphByCodepoint(K){if(this.fontType!="ttf")throw new Error("Only TTF outlines are supported for now");let Z=this.getGlyfTable();if(Z===null)return null;let $=this.getCmapTable().codepointToGlyphId.get(K);if($===void 0)return null;return Z.glyphs.at($)}get codepointByName(){let Z=this.#Z.get("codepointByName");if(Z===void 0){let J=this.getCmapTable(),$=this.getPostTable();Z=new Map;for(let Q of Y.range(this.glyphCount)){let j=$.glyphIdToName.get(Q),q=J.glyphIdToCodepoint.get(Q);if(j===void 0||q===void 0||q===0)continue;Z.set(j,q)}this.#Z.set("codepointByName",Z)}return Z}specimen(K=null,Z=null,J=null){K=K??KK,Z=Z??JK,J=J??ZK;let $=this.getGlyfTable();if($===null||this.glyphCount===0)return"";let Q=[];Q.push("M0,0h1v1h-1z");let j=K/100;K+=J;let q=0,W=0;for(let X of $.glyphs){if(X.contoursCount===0)continue;q=Math.floor(W/Z);let G=W%Z,k=z.identity().translate(J+G*K,J+q*K).scale(j,j),[M,A]=X.toSVGPath(k,!0);if(A===null)continue;let B=A[1].sub(A[0]);if(B.x===0||B.y===0)continue;Q.push(M),Q.push(`
`),W+=1}let U=J+Z*K,V=J+(q+1)*K;return Q.push(`M${U},${V}h1v1h-1z`),Q.join("")}info(){let K=this.getNameTable(),Z=this.getHeadTable();return{family:K.family,subfamily:K.subfamily,version:K.version,glyph_count:this.glyphCount,post_count:this.getPostTable().glyphIdToName.size,units_per_em:Z.unitsPerEm,modified_dt:Z.modifiedDate.toISOString(),tables:Y.from(this.tables).map(([J,$])=>[J,$.length]).collectObject()}}#J(K,Z){let J=this.#Z.get(K);if(J===void 0){let $=this.tables.get(K);if($===void 0)throw new Error(`Table not found: ${K}`);J=Z(this,$.reader(this)),this.#Z.set(K,J)}return J}getNameTable(){return this.#J("name",y.load)}getHeadTable(){return this.#J("head",S.load)}getPostTable(){return this.#J("post",D.load)}getCmapTable(){return this.#J("cmap",O.load)}getLocaTable(){if(this.tables.get("loca")===void 0)return null;return this.#J("loca",P.load)}getGlyfTable(){if(this.tables.get("glyf")===void 0)return null;return this.#J("glyf",C.load)}getHheaTable(){return this.#J("hhea",T.load)}getHmtxTable(){return this.#J("hmtx",v.load)}}class y{copyright;family;subfamily;fontId;fullname;version;constructor(K,Z,J,$,Q,j){this.copyright=K;this.family=Z;this.subfamily=J;this.fontId=$;this.fullname=Q;this.version=j}static load(K,Z){Z.readU16();let J=Z.readU16(),$=Z.readU16(),Q=[];for(let W=0;W<J;W++){let U={platfromId:Z.readU16(),encodingId:Z.readU16(),langaugeId:Z.readU16(),nameId:Z.readU16(),lenght:Z.readU16(),offset:Z.readU16()};if(U.platfromId!==3)continue;if(U.langaugeId!==1033)continue;if(U.encodingId in[1,10])Q.push(U)}let j=["","","","","",""],q=new TextDecoder("utf-16be");for(let W of Q){if(W.nameId>5)continue;Z.seek($+W.offset);let U=Z.read(W.lenght);j[W.nameId]=q.decode(U)}return new y(...j)}}class S{revision;flags;unitsPerEm;createdDate;modifiedDate;minPoint;maxPoint;macStyle;lowestRecPpem;fontDirectionHint;indexToLocFormat;glyphDataFormat;constructor(K,Z,J,$,Q,j,q,W,U,V,X,G){this.revision=K;this.flags=Z;this.unitsPerEm=J;this.createdDate=$;this.modifiedDate=Q;this.minPoint=j;this.maxPoint=q;this.macStyle=W;this.lowestRecPpem=U;this.fontDirectionHint=V;this.indexToLocFormat=X;this.glyphDataFormat=G}static load(K,Z){Z.readU16(),Z.readU16();let J=Z.readFixed();Z.readU32(),console.assert(Z.readU32()===1594834165);let $=Z.readU16(),Q=Z.readU16(),j=Z.readLongDate(),q=Z.readLongDate(),W=new L(Z.readI16(),Z.readI16()),U=new L(Z.readI16(),Z.readI16()),V=Z.readU16(),X=Z.readU16(),G=Z.readI16(),k=Z.readI16(),M=Z.readI16();return new S(J,$,Q,j,q,W,U,V,X,G,k,M)}}class D{glyphIdToName;constructor(K){this.glyphIdToName=K}toString(){return`PostTable(count=${this.glyphIdToName.size})`}static load(K,Z){if(Z.readFixed()!==2)return new D(new Map);Z.advance(28);let $=Z.readU16(),Q=new Map,j=0;for(let V=0;V<$;V++){let X=Z.readU16();if(X>258){let G=X-258;j=Math.max(j,G),Q.set(V,G)}}let q=[],W=j+1;for(let V=0;V<W;V++){let X=Z.readU8();q.push(Z.readString(X))}let U=new Map;for(let[V,X]of Q)U.set(V,q[X]);return new D(U)}}class O{codepointToGlyphId;glyphIdToCodepoint;constructor(K,Z){this.codepointToGlyphId=K;this.glyphIdToCodepoint=Z}toString(){return`CmapTable(count=${this.codepointToGlyphId.size})`}static load(K,Z){Z.readU16();let J=0,$=Z.readU16();for(let q=0;q<$;q++){let W=Z.readU16(),U=Z.readU16(),V=Z.readU32();if(W===0&&U===4)J=V;else if(!J&&W===0&&U===3)J=V}if(!J)throw new Error("Only support unicode (0) format (4, 3) cmap tables");Z.seek(J);let Q=Z.readU16(),j=new O(new Map,new Map);if(Q===12){Z.readU16(),Z.readU32(),Z.readU32();let q=Z.readU32();for(let W=0;W<q;W++){let U=Z.readU32(),V=Z.readU32()+1,X=Z.readU32();for(let G=U;G<V;G++)j.glyphIdToCodepoint.set(X,G),j.codepointToGlyphId.set(G,X),X+=1}}else if(Q==4){let q=Z.readU16(),W=Z.view(Z.tell(),Z.tell()+q);W.advance(2);let U=Math.floor(W.readU16()/2);W.advance(6);let V=Z.readU32(),X=Y.range(U).map((F)=>W.readU16()).collectArray();W.readU16();let G=Y.range(U).map((F)=>W.readU16()).collectArray(),k=Y.range(U).map((F)=>W.readI16()).collectArray(),M=Y.range(U).map((F)=>W.readU16()).collectArray(),A=(W.length()-W.tell())/2,B=Y.range(A).map((F)=>W.readU16()).collectArray();for(let[F,H,w,E]of Y.zip(X,G,k,M)){if(F===H&&H===65535)break;for(let N of Y.range(H,F+1)){if(E!=0){console.error("[cmap][format=4] idRangeOffset != not implemented");break}let u=(N+w)%65536;j.glyphIdToCodepoint.set(u,N),j.codepointToGlyphId.set(N,u)}}}return j}}class P{offsets;constructor(K){this.offsets=K}static load(K,Z){let J;if(K.getHeadTable().indexToLocFormat==0)J=(Q)=>2*Z.readU16();else J=(Q)=>Z.readU32();let $=Y.range(K.glyphCount+1).map(J).collectArray();return new P($)}}class C{glyphs;constructor(K){this.glyphs=K}toString(){return`GlyphTable(count=${this.glyphs.length})`}static load(K,Z){let J=K.getLocaTable();if(!J)return null;let $=Y.range(K.glyphCount).map((Q)=>{let j=J.offsets[Q],q=J.offsets[Q+1],W=Z.view(j,q);return new l(K,Q,W)}).collectArray();return new C($)}}class T{ascender;descender;lineGap;advanceWidthMax;minLeftSideBearing;minRightSideBearing;xMaxExtent;caretSlopeRise;caretSlopeRun;caretOffset;numberOfMetrics;constructor(K,Z,J,$,Q,j,q,W,U,V,X){this.ascender=K;this.descender=Z;this.lineGap=J;this.advanceWidthMax=$;this.minLeftSideBearing=Q;this.minRightSideBearing=j;this.xMaxExtent=q;this.caretSlopeRise=W;this.caretSlopeRun=U;this.caretOffset=V;this.numberOfMetrics=X}static load(K,Z){console.assert(Z.readU16()==1),console.assert(Z.readU16()==0);let J=Z.readI16(),$=Z.readI16(),Q=Z.readI16(),j=Z.readU16(),q=Z.readI16(),W=Z.readI16(),U=Z.readI16(),V=Z.readI16(),X=Z.readI16(),G=Z.readI16();Z.advance(10);let k=Z.readU16();return new T(J,$,Q,j,q,W,U,V,X,G,k)}}class v{metrics;bearings;numberOfMetrics;constructor(K,Z,J){this.metrics=K;this.bearings=Z;this.numberOfMetrics=J}getAdvance(K){if(K>=this.numberOfMetrics)return;if(K<this.metrics.length)this.metrics.at(K)?.advance;return this.metrics.at(-1)?.advance}getSideBearing(K){if(K<this.metrics.length)return this.metrics.at(K)?.sideBearing;else{let Z=K-this.metrics.length;return this.bearings.at(Z)}}toString(){return`HmtxTable(numberOfMetrix=${this.numberOfMetrics})`}static load(K,Z){let $=K.getHheaTable().numberOfMetrics,Q=Y.range($).map((W)=>{return{advance:Z.readU16(),sideBearing:Z.readI16()}}).collectArray(),j=K.glyphCount-$,q=[];if(j>0)$+=j,q=Y.range(j).map((W)=>Z.readI16()).collectArray();return new v(Q,q,$)}}class s{family;ufont;icons;constructor(K,Z,J){let $=new Y(Object.entries(J)).filterMap(([Q,j])=>{let q=Z.glyphByCodepoint(j);if(q)return[Q,new i(this,Q,j,q)]}).collectMap();this.family=K,this.ufont=Z,this.icons=$}static async load(K){let[Z,J]=await Promise.all([fetch(K.metadata).then((j)=>j.json()),fetch(K.font).then((j)=>j.arrayBuffer())]);document.fonts.add(new FontFace(K.name,J));let $=document.createElement("style");$.innerText=`.${K.name} {font-family: "${K.name}"}`,document.getElementsByTagName("head")[0].appendChild($);let Q=new R(J);return new s(K.name,Q,Z.names)}getIcon(K){return this.icons.get(K)}}class i{font;glyph;name;codepoint;content;constructor(K,Z,J,$){this.font=K,this.glyph=$,this.name=Z,this.codepoint=J,this.content=String.fromCodePoint(this.codepoint)}get fullName(){return`${this.font.family}-${this.name}`}toSVGString(){let[K,Z]=this.glyph.toSVGPath();return['<?xml version="1.0"?>','<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100">',`  <path d="${K}"/>`,"</svg>"].join(`
`)}toHTMLElement(){let K=document.createElement("div");return K.textContent=this.content,K.style.fontFamily=this.font.family,K.classList.add("icon-resolve"),K}}class x{icons;size;constructor(K){this.icons=K,this.size=new Y(K.values()).fold(0,(Z,J)=>Z+J.size)}static fromFonts(K){let Z=new Y(K).map((J)=>[J.family,J.icons]).collectMap();return new x(Z)}filter(K){if(K.length==0)return this;let Z=new RegExp(K),J=new Y(this.icons).filterMap(([$,Q])=>{let j=new Y(Q).filter(([q,W])=>{return q.search(Z)>=0}).collectMap();return j.size==0?null:[$,j]}).collectMap();return new x(J)}find(K){let Z=K.match(/(?<fontFamily>[^-]*)-(?<iconName>.*)/);if(!Z)return null;let{fontFamily:J,iconName:$}=Z.groups;return this.icons.get(J)?.get($)??null}toHTMLElement(K){let Z=document.createElement("div");return Z.classList.add("sections"),new Y(this.icons).forEach(([J,$])=>{let Q=document.createElement("div");Q.classList.add("section"),Z.appendChild(Q);let j=document.createElement("div");j.appendChild((K.sectionsExpanded.get(J)?K.iconUI.fold:K.iconUI.unfold).toHTMLElement());let q=J.charAt(0).toUpperCase()+J.slice(1);j.appendChild(document.createTextNode(`${q} (${$.size})`)),j.classList.add("section-header"),j.addEventListener("click",(V)=>{if(K.sectionsExpanded.get(J))K.sectionsExpanded.set(J,!1),U.style.display="none",j.replaceChild(K.iconUI.unfold.toHTMLElement(),j.firstChild);else K.sectionsExpanded.set(J,!0),U.style.display="",j.replaceChild(K.iconUI.fold.toHTMLElement(),j.firstChild)}),Q.appendChild(j);let W=document.getElementById("header-icon-name"),U=document.createElement("div");U.classList.add("section-icons"),U.classList.add(J),U.style.display=K.sectionsExpanded.get(J)?"":"none",new Y($).forEach(([V,X])=>{let G=document.createElement("div"),k=`${J}-${V}`;G.textContent=X.content,G.dataset.name=k,G.addEventListener("click",()=>$K(X)),G.addEventListener("mouseover",(M)=>{let A=M.target;W.innerText=A.dataset.name}),G.addEventListener("mouseleave",(M)=>{W.innerText=""}),U.appendChild(G)}),Q.appendChild(U)}),Z}}function QK(K,Z=300){let J;return(...$)=>{clearTimeout(J),J=window.setTimeout(()=>{K.apply(this,$)},Z)}}function $K(K){let Z=document.getElementById("preview-svg");Z.innerHTML=K.toSVGString();let J=document.getElementById("preview-name"),$=K.codepoint.toString(16).toUpperCase();J.innerHTML=`${K.fullName} <span class="codepoint">U+${$}<span>`;let Q=document.getElementById("preview-dialog");Q.dataset.name=K.fullName,Q.showModal()}function XK(K){let Z={close:K.find("material-close-circle-outline"),clipboard:K.find("material-clipboard-outline"),copySVG:K.find("material-vector-curve"),fold:K.find("material-minus-box-outline"),foldAll:K.find("material-collapse-all-outline"),unfold:K.find("material-plus-box-outline"),unfoldAll:K.find("material-expand-all-outline"),theme:K.find("material-theme-light-dark")},J=new Y(K.icons.keys()).map((M)=>[M,!0]).collectMap(),$={iconUI:Z,sectionsExpanded:J},Q=document.getElementById("preview-dialog");Q.addEventListener("click",(M)=>{let A=Q.getBoundingClientRect();if(M.clientX<A.left||M.clientX>A.right||M.clientY<A.top||M.clientX>A.bottom)Q.close()});let j=document.getElementById("preview-close");j.replaceChildren($.iconUI.close.toHTMLElement()),j.addEventListener("click",()=>{Q.close()});let q=document.getElementById("preview-copy-name");q.replaceChildren($.iconUI.clipboard.toHTMLElement()),q.addEventListener("click",()=>{navigator.clipboard.writeText(Q.dataset.name)});let W=document.getElementById("preview-copy-svg");W.replaceChildren($.iconUI.copySVG.toHTMLElement()),W.addEventListener("click",()=>{let M=K.find(Q.dataset.name);navigator.clipboard.writeText(M.toSVGString())});let U=document.getElementById("search-result"),V=document.getElementById("header-search-input"),X=()=>{let M=K.filter(V.value).toHTMLElement($);U.replaceChildren(M)};V.addEventListener("input",QK(X));let G=document.getElementById("collapse");G.appendChild($.iconUI.foldAll.toHTMLElement()),G.addEventListener("click",()=>{let M=new Y($.sectionsExpanded.values()).fold(!1,(A,B)=>A||B);for(let A of $.sectionsExpanded.keys())$.sectionsExpanded.set(A,!M);G.replaceChildren((M?$.iconUI.unfoldAll:$.iconUI.foldAll).toHTMLElement()),X()});let k=document.getElementById("theme-button");k.replaceChildren($.iconUI.theme.toHTMLElement()),k.addEventListener("click",()=>{U.replaceChildren(),localStorage.setItem("theme-dark",document.documentElement.classList.toggle("theme-dark").toString()),X()}),X()}export{XK as setup,x as IconSet,s as Font};

//# debugId=A4D22A8EB87C498364756E2164756E21
//# sourceMappingURL=main.js.map
